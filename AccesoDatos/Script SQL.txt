CREATE DATABASE CASSANO_DB
GO
USE CASSANO_DB
GO
CREATE TABLE EMPLEADOS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  DOCUMENTO INT NOT NULL,
  APELLIDO VARCHAR(50) NOT NULL,
  NOMBRE VARCHAR(50) NOT NULL,
  TELEFONO INT NULL,
  CALLE VARCHAR(50) NULL,
  NUMERACION INT NULL,
  LOCALIDAD VARCHAR(50) NULL,
  FECHANAC DATE NOT NULL,
  LEGAJO INT NOT NULL,
  TAREA VARCHAR(50) NOT NULL,
  FECHA_INGRESO DATE NOT NULL,
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE CLIENTES(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  DOCUMENTO INT NOT NULL,
  APELLIDO VARCHAR(50) NOT NULL,
  NOMBRE VARCHAR(50) NOT NULL,
  TELEFONO INT NULL,
  CALLE VARCHAR(50) NULL,
  NUMERACION INT NULL,
  LOCALIDAD VARCHAR(50) NULL,
  FECHANAC DATE NOT NULL,
)
GO
CREATE TABLE PROVEEDORES(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  CUIT BIGINT NOT NULL,
  APELLIDO VARCHAR(50) NOT NULL,
  NOMBRE VARCHAR(50) NOT NULL,
  TELEFONO INT NULL,
  CALLE VARCHAR(50) NULL,
  NUMERACION INT NULL,
  LOCALIDAD VARCHAR(50) NULL,
  FECHANAC DATE NOT NULL,
  RUBRO VARCHAR(50) NOT NULL,
  MONOTRIBUTISTA BIT NULL,
  RESPONSABLE_INSC BIT NULL,
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE BEBIDAS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  MARCA VARCHAR(50) NOT NULL,
  CONTIENE_ALCOHOL BIT NOT NULL DEFAULT(0),
  PRECIO_UNITARIO DECIMAL NOT NULL CHECK (PRECIO_UNITARIO >= 0),
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE CERVEZAS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  TIPO VARCHAR(50) NOT NULL,
  GRADUACION_ALCOHOLICA DECIMAL NOT NULL DEFAULT(0),
  PRECIO_UNITARIO DECIMAL NOT NULL CHECK (PRECIO_UNITARIO >= 0),
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE PLATOS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  APTO_CELIACOS BIT NOT NULL,
  OPCION_VEGETARIANA BIT NOT NULL,
  PRECIO_UNITARIO DECIMAL NOT NULL CHECK (PRECIO_UNITARIO >= 0),
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE COMBOS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  NOMBRE VARCHAR(50) NOT NULL,
  IDPLATO INT NULL FOREIGN KEY REFERENCES PLATOS(ID),
  IDBEBIDA INT NULL FOREIGN KEY REFERENCES BEBIDAS(ID),
  IDCERVEZA INT NULL FOREIGN KEY REFERENCES CERVEZAS(ID),
  PRECIO_UNITARIO DECIMAL NOT NULL CHECK (PRECIO_UNITARIO >= 0),
  ESTADO BIT NOT NULL DEFAULT (1)
)
GO	
CREATE TABLE PEDIDOS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  IDCLIENTE INT NULL FOREIGN KEY REFERENCES CLIENTES(ID),
  PRECIO_FINAL DECIMAL NOT NULL CHECK (PRECIO_FINAL >= 0)
)
GO
CREATE TABLE PRODUCTOS_POR_PEDIDO(
  IDPLATO INT NULL FOREIGN KEY REFERENCES PLATOS(ID),
  IDBEBIDA INT NULL FOREIGN KEY REFERENCES BEBIDAS(ID),
  IDCERVEZA INT NULL FOREIGN KEY REFERENCES CERVEZAS(ID),
  IDPEDIDO INT NULL FOREIGN KEY REFERENCES PEDIDOS(ID),
  CANTIDAD INT NOT NULL CHECK (CANTIDAD > 0),
  PRECIO_PARCIAL DECIMAL NOT NULL CHECK (PRECIO_PARCIAL >= 0)
)
GO
CREATE TABLE ENVIOS(
  ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
  IDPEDIDO INT NULL FOREIGN KEY REFERENCES PEDIDOS(ID),
  IDCLIENTE INT NULL FOREIGN KEY REFERENCES CLIENTES(ID),
  PAGO BIT NOT NULL
)
GO
CREATE TABLE PROMOCIONES(
ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
TIPO_DESCUENTO VARCHAR(50) NOT NULL,
PORCENTAJE_DESCUENTO INT NOT NULL,
ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE MESAS(
ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
CANTIDAD_ESPACIOS INT NOT NULL,
IDCLIENTE INT NULL FOREIGN KEY REFERENCES CLIENTES(ID),
IDPEDIDO INT NULL FOREIGN KEY REFERENCES CLIENTES(ID),
ESTADO BIT NOT NULL DEFAULT (1)
)
GO
CREATE TABLE LISTA_ESPERA(
ORDEN INT NOT NULL PRIMARY KEY,
CANTIDAD_PERSONAS INT NOT NULL,
IDCLIENTE INT NULL FOREIGN KEY REFERENCES CLIENTES(ID)
)
GO
CREATE TABLE RESERVAS(
ID INT NOT NULL PRIMARY KEY IDENTITY (1, 1),
CANTIDAD_ESPACIOS INT NOT NULL,
IDMESA INT NULL FOREIGN KEY REFERENCES MESAS(ID),
IDCLIENTE INT NULL FOREIGN KEY REFERENCES CLIENTES(ID)
)


Use CASSANO_DB
Set Dateformat 'DMY'

Set Identity_Insert EMPLEADOS ON
Insert into EMPLEADOS (ID, DOCUMENTO, APELLIDO, NOMBRE, TELEFONO, CALLE, NUMERACION, LOCALIDAD, FECHANAC, LEGAJO, TAREA, FECHA_INGRESO)
VALUES
(1, 39009907, 'Rodriguez', 'Rodrigo', '45124485','Chacabuco', 333, 'Tigre', '03/05/1994', 1,'Mesero', '12/08/2015'),
(2, 40304206, 'Ramirez', 'Berta', '47128454','Yapeyu', 231, 'Pacheco', '09/11/1995', 1,'Encargado', '21/04/2014')
Set Identity_Insert EMPLEADOS OFF

Set Identity_Insert CLIENTES ON
Insert into CLIENTES (ID, DOCUMENTO, APELLIDO, NOMBRE, TELEFONO, CALLE, NUMERACION, LOCALIDAD, FECHANAC)
VALUES
(1, 42034907, 'Gonzalez', 'Camila', '45125587','Cazon', 991, 'Tigre', '07/02/1998'),
(2, 44305170, 'Perez', 'Roman', '47554321','Bordieu', 457, 'Tigre', '29/12/2000')
Set Identity_Insert CLIENTES OFF

Set Identity_Insert PROVEEDORES ON
Insert into PROVEEDORES (ID, CUIT, APELLIDO, NOMBRE, TELEFONO, CALLE, NUMERACION, LOCALIDAD, FECHANAC, RUBRO, MONOTRIBUTISTA, RESPONSABLE_INSC)
VALUES
(1, 20321359089, 'Gomez', 'Ludmila', '45123392','Cochabamba', 224, 'Tigre', '15/04/1992', 'Bebidas', 1, 0),
(2, 27433041737, 'Lopez', 'Juan', '47359424','Rio Cuarto', 4487, 'Tigre', '11/11/1985','Carnes',0,1)
Set Identity_Insert PROVEEDORES OFF

Insert into BEBIDAS (NOMBRE, MARCA, CONTIENE_ALCOHOL, PRECIO_UNITARIO)
VALUES
('GASEOSA', 'SPRITE', 0, 40),
('APERITIVO', 'CAMPARI', 1, 80)

Insert into CERVEZAS (NOMBRE, TIPO, GRADUACION_ALCOHOLICA, PRECIO_UNITARIO)
VALUES
('SCOTTISH', 'ROJA', 3.8, 110),
('IPA', 'RUBIA', 3.3, 90)

Insert into PLATOS (NOMBRE, APTO_CELIACOS, OPCION_VEGETARIANA, PRECIO_UNITARIO)
VALUES
('MILANESA', 0, 0, 160),
('WRAP DE VERDURAS', 1, 1, 130)

Insert into COMBOS (NOMBRE, IDPLATO, IDBEBIDA, IDCERVEZA, PRECIO_UNITARIO)
VALUES
('COMBO LED ZEPPELIN', 1, NULL, 2, 220),
('COMBO MORRISSEY', 2, NULL, 1, 200)

Insert into PEDIDOS (IDCLIENTE, PRECIO_FINAL)
VALUES
(1, 400),
(2, 440)

Insert into PRODUCTOS_POR_PEDIDO (IDPLATO, IDBEBIDA, IDCERVEZA, IDPEDIDO, CANTIDAD, PRECIO_PARCIAL)
VALUES
(1, NULL, 2, 1, 1, 220),
(2, NULL, 1, 2, 1, 200)

Insert into ENVIOS (IDPEDIDO, IDCLIENTE, PAGO)
VALUES
(1,1,0),
(2,2,1)

Insert into PROMOCIONES (TIPO_DESCUENTO, PORCENTAJE_DESCUENTO)
VALUES
('HAPPY HOUR - BEBIDAS ALCOHOLICAS', 50),
('ESTUDIANTES UTN - TOTAL', 20)

Insert into MESAS (CANTIDAD_ESPACIOS, IDCLIENTE, IDPEDIDO)
VALUES
(4,1,1),
(8,2,2)

Insert into LISTA_ESPERA (ORDEN, CANTIDAD_PERSONAS, IDCLIENTE)
VALUES
(1, 4, 1),
(2, 8, 2)

Insert into RESERVAS (CANTIDAD_ESPACIOS, IDMESA, IDCLIENTE)
VALUES
(4,1,1),
(8,2,2)
